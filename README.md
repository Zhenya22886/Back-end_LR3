# Лабораторна робота №2  
## Розробка базового REST API

---

## Опис

У межах лабораторної роботи реалізовано простий **Flask-бекенд**, який надає базовий **REST API** для обліку витрат.

Сервіс працює з трьома основними сутностями:

- **User** – користувач;
- **Category** – категорія витрат;
- **Record** – запис витрати.

Дані зберігаються в оперативній памʼяті (in-memory словники), без використання зовнішньої бази даних, що відповідає вимогам до ЛР2.

Проєкт запаковано в Docker та задеплоєно на Render:

- Базовий URL сервісу:  
  `https://back-end-lr2.onrender.com`

Приклади ендпоінтів:

- `GET https://back-end-lr2.onrender.com/healthcheck`
- `POST https://back-end-lr2.onrender.com/user`
- `POST https://back-end-lr2.onrender.com/category`
- `POST https://back-end-lr2.onrender.com/record`

---

## Мета лабораторної роботи

- Ознайомитися з принципами побудови **REST API**.
- Навчитися створювати **HTTP-ендпоінти** у Flask.
- Засвоїти базові підходи до валідації вхідних даних та обробки помилок.
- Налаштувати запуск застосунку у **Docker-контейнері**.
- Отримати навички деплою бекенду на **хмарний сервіс (Render)**.
- Відпрацювати роботу з API через інструменти типу **Postman / Insomnia**.

---

## Завдання

1. Розробити Flask-застосунок, який реалізує REST API для обліку витрат.
2. Описати та реалізувати сутності:
   - **User**: `id`, `name`;
   - **Category**: `id`, `name`;
   - **Record**: `id`, `user_id`, `category_id`, `created_at`, `amount`.
3. Реалізувати такі ендпоінти (відповідно до методичних вказівок):

   **Системний:**
   - `GET /healthcheck` – перевірка працездатності сервісу.

   **Users:**
   - `POST /user` – створення користувача.
   - `GET /users` – отримання списку всіх користувачів.
   - `GET /user/<id>` – отримання користувача за `id`.
   - `DELETE /user/<id>` – видалення користувача та всіх його записів витрат.

   **Categories:**
   - `POST /category` – створення категорії витрат.
   - `GET /category` – отримання списку всіх категорій.
   - `DELETE /category?id=<id>` – видалення категорії за `id`  
     (параметр передається як `query`), разом з усіма повʼязаними записами витрат.

   **Records:**
   - `POST /record` – створення запису витрати.
   - `GET /record/<id>` – отримання запису витрати за `id`.
   - `DELETE /record/<id>` – видалення запису витрати.
   - `GET /record?user_id=<user_id>&category_id=<category_id>` – отримання списку витрат за фільтрами:
     - тільки `user_id`,
     - тільки `category_id`,
     - одночасно `user_id` та `category_id`.
     - Якщо не передано жодного параметра – повернути помилку **400**.

4. Організувати зберігання даних у вигляді in-memory словників без використання СУБД.
5. Запакувати застосунок у Docker-образ.
6. Задеплоїти застосунок на Render і перевірити роботу ендпоінтів.
7. Створити колекцію запитів у Postman / Insomnia для демонстрації роботи API.

---

## Компіляція і запуск проєкту

### 1. Локальний запуск 

#### Створення та активація віртуального середовища

```
python -m venv env

.\env\Scripts\Activate.ps1

pip install -r requirements.txt

flask --app app run -h 0.0.0.0 -p 8080
```
### 2. Запуск у Docker

#### Збираєм образ
```
docker build -t back-end-lr2 .
```

#### Запускаєм
```
docker-compose up --build
```
